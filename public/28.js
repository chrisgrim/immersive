(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{279:function(t,e,i){"use strict";i.r(e);var a=i(78),s={components:{CubeSpinner:i(87).a},props:{event:{type:Object}},computed:{hasImage:function(){return!(!this.eventImage&&!this.imageSrc)}},data:function(){return{eventImage:this.event.largeImagePath?"/storage/".concat(this.event.largeImagePath):"",defaultImage:"/storage/website-files/upload-icon.png",eventUrl:"/create-event/".concat(this.event.slug),finalImage:"",imageSrc:"",isLoading:!1,readyToSubmit:!1,isModalVisible:!1,dis:!1}},methods:{onImageUpload:function(t){if(this.finalImage=t.file,this.finalImage.width=t.width,this.finalImage.height=t.height,this.$v.$touch(),this.$v.$invalid)return!1;this.imageSrc=t.src,this.addImage(t)},addImage:function(t){var e=this;this.isLoading=!0,this.dis=!0;var i=new FormData;i.append("image",this.finalImage),axios.post("".concat(this.eventUrl,"/images"),i).then((function(t){e.isLoading=!1,e.dis=!1,e.readyToSubmit=!0})).catch((function(t){e.validationErrors=t.response.data.errors,e.dis=!1}))},showModal:function(t){this.isModalVisible=!0},closeModal:function(){this.isModalVisible=!1},submitReview:function(){window.location.href="".concat(this.eventUrl,"/review")},submitEvent:function(){this.dis=!0,window.location.href="".concat(this.eventUrl,"/thankyou")},readySubmit:function(){this.event.organizer_id&&this.event.name&&this.event.location_latlon&&this.event.category_id&&this.event.show_times&&this.event.description&&this.event.advisories_id&&(this.readyToSubmit=!0)},goBack:function(){window.location.href="".concat(this.eventUrl,"/advisories")}},created:function(){this.readySubmit()},validations:{finalImage:{required:a.required,fileSize:function(){return!this.finalImage||this.finalImage.size<20971520},fileType:function(){return!this.finalImage||["image/jpeg","image/png","image/gif"].includes(this.finalImage.type)},imageRatio:function(){return!this.finalImage||this.finalImage.width>1280&&this.finalImage.height>800}}}},n=i(81),o=Object(n.a)(s,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"image"},[i("div",{staticClass:"section"},[i("div",{staticClass:"img"},[i("div",{staticClass:"loader"},[i("label",{style:{backgroundImage:"url('"+(t.imageSrc?t.imageSrc:t.eventImage)+"')"}},[i("div",{staticClass:"dash",class:{over:t.hasImage,load:t.isLoading}},[i("div",{staticClass:"box"},[i("div",{staticClass:"in"},[t.isLoading?t._e():i("div",[i("svg",{staticClass:"b",attrs:{height:"32",width:"32",viewBox:"0 0 24 24","aria-label":"Add an image or video",role:"img"}},[i("path",{attrs:{d:"M24 12c0-6.627-5.372-12-12-12C5.373 0 0 5.373 0 12s5.373 12 12 12c6.628 0 12-5.373 12-12zm-10.767 3.75a1.25 1.25 0 0 1-2.5 0v-3.948l-1.031 1.031a1.25 1.25 0 0 1-1.768-1.768L12 7l4.066 4.065a1.25 1.25 0 0 1-1.768 1.768l-1.065-1.065v3.982z"}})])]),t._v(" "),i("div",[t.hasImage?t._e():i("p",[t._v("Click here to upload image"),i("br"),t._v("Must be at least 1280 x 800 and under 20mb")]),t._v(" "),t.hasImage?i("p",[t._v("Change Image")]):t._e()])])]),t._v(" "),i("image-upload",{on:{loaded:t.onImageUpload}}),t._v(" "),i("CubeSpinner",{attrs:{loading:t.isLoading}})],1)]),t._v(" "),i("div",[t.$v.finalImage.$error?i("div",{staticClass:"validation-error"},[t.$v.finalImage.required?t._e():i("p",{staticClass:"error"},[t._v("The image is required")]),t._v(" "),t.$v.finalImage.fileSize?t._e():i("p",{staticClass:"error"},[t._v("The image file size is too large")]),t._v(" "),t.$v.finalImage.fileType?t._e():i("p",{staticClass:"error"},[t._v("The image needs to be a JPG, PNG or GIF")]),t._v(" "),t.$v.finalImage.imageRatio?t._e():i("p",{staticClass:"error"},[t._v("The image needs to be at least 1200 x 800")])]):t._e()])])])]),t._v(" "),i("div",{staticClass:"inNav"},[i("button",{staticClass:"create",attrs:{disabled:t.dis},on:{click:function(e){return e.preventDefault(),t.goBack()}}},[t._v(" Back ")]),t._v(" "),t.readyToSubmit?i("button",{staticClass:"create",attrs:{disabled:t.dis},on:{click:function(e){return e.preventDefault(),t.submitReview()}}},[t._v(" Final Review ")]):t._e()]),t._v(" "),i("modal",{directives:[{name:"show",rawName:"v-show",value:t.isModalVisible,expression:"isModalVisible"}],on:{close:t.closeModal}},[i("div",{attrs:{slot:"header"},slot:"header"},[i("div",{staticClass:"circle sub"},[i("p",[t._v("âœ“")])])]),t._v(" "),i("div",{attrs:{slot:"body"},slot:"body"},[i("h3",[t._v("Is Everything Correct?")]),t._v(" "),i("p",[t._v("Events take 1-2 days to be reviewed")])]),t._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("button",{staticClass:"btn sub",on:{click:function(e){return t.submitEvent()}}},[t._v("Submit")])])])],1)}),[],!1,null,null,null);e.default=o.exports},81:function(t,e,i){"use strict";function a(t,e,i,a,s,n,o,r){var l,d="function"==typeof t?t.options:t;if(e&&(d.render=e,d.staticRenderFns=i,d._compiled=!0),a&&(d.functional=!0),n&&(d._scopeId="data-v-"+n),o?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),s&&s.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},d._ssrRegister=l):s&&(l=r?function(){s.call(this,this.$root.$options.shadowRoot)}:s),l)if(d.functional){d._injectStyles=l;var c=d.render;d.render=function(t,e){return l.call(e),c(t,e)}}else{var v=d.beforeCreate;d.beforeCreate=v?[].concat(v,l):[l]}return{exports:t,options:d}}i.d(e,"a",(function(){return a}))},87:function(t,e,i){"use strict";var a={props:{loading:{type:Boolean,default:!0}},data:function(){return{styles:{width:this.width+"px",height:this.height+"px"}}},name:"CubeSpinner"},s=i(81),n=Object(s.a)(a,(function(){var t=this.$createElement,e=this._self._c||t;return this.loading?e("div",{staticClass:"spinner"},[this._m(0),this._v(" "),e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",version:"1.1"}},[e("defs",[e("filter",{attrs:{id:"goo"}},[e("feGaussianBlur",{attrs:{in:"SourceGraphic",stdDeviation:"10",result:"blur"}}),this._v(" "),e("feColorMatrix",{attrs:{in:"blur",mode:"matrix",values:"1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 21 -7"}})],1)])])]):this._e()}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"area"},[e("div",{staticClass:"dot dot-1"}),this._v(" "),e("div",{staticClass:"dot dot-2"}),this._v(" "),e("div",{staticClass:"dot dot-3"})])}],!1,null,null,null);e.a=n.exports}}]);