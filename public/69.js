(window.webpackJsonp=window.webpackJsonp||[]).push([[69],{312:function(e,t,s){"use strict";s.r(t);var a=s(77),r=s(82),o={components:{Multiselect:s.n(r).a},data:function(){return{users:[],userList:[],searchUserOptions:[],regionActive:!1,user:"",isModalVisible:!1,modal:!1,selectedModal:"",isLoading:""}},computed:{},methods:{showModal:function(e,t){this.selectedModal=e,this.modal=t},deleteUser:function(e){var t=this;axios.delete("/users/".concat(e.id)).then((function(e){t.modal=null,t.loadUsers()})).catch((function(e){t.serverErrors=e.response.data.errors}))},loadUsers:function(){var e=this;axios.get("/userlist/fetch").then((function(t){console.log(t.data),e.users=t.data})).catch((function(t){e.serverErrors=t.response.data.errors}))},saveName:function(e){var t=this,s={name:e.name};axios.patch("/master/userlist/".concat(e.id),s).then((function(e){console.log(e.data),t.loadUsers()})).catch((function(e){t.serverErrors=e.response.data.errors}))},saveEmail:function(e){var t=this,s={email:e.email};axios.patch("/master/userlist/".concat(e.id),s).then((function(e){console.log(e.data),t.loadUsers()})).catch((function(e){t.serverErrors=e.response.data.errors}))},saveUserType:function(e){var t=this,s={type:e.type};axios.patch("/master/userlist/".concat(e.id),s).then((function(e){console.log(e.data),t.loadUsers()})).catch((function(e){t.serverErrors=e.response.data.errors}))},asyncGenerateUserList:function(e){var t=this;axios.get("/api/search/user/list",{params:{keywords:e}}).then((function(e){console.log(e.data),t.users=e.data})).catch((function(e){t.loadUsers()}))},createList:function(){this.searchUserOptions=this.userlist}},created:function(){this.loadUsers()},validations:{region:{required:a.required}}},n=s(80),i=Object(n.a)(o,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"users"},[e._m(0),e._v(" "),s("div",{staticClass:"field"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.userList,expression:"userList"}],staticClass:"general",attrs:{placeholder:"Filter by name or email",type:"text"},domProps:{value:e.userList},on:{keyup:function(t){return e.asyncGenerateUserList(e.userList)},input:function(t){t.target.composing||(e.userList=t.target.value)}}})]),e._v(" "),e._l(e.users,(function(t,a){return s("div",{staticClass:"list"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"user.name"}],attrs:{type:"text",placeholder:"User Name"},domProps:{value:t.name},on:{blur:function(s){return e.saveName(t)},input:function(s){s.target.composing||e.$set(t,"name",s.target.value)}}}),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"user.email"}],attrs:{type:"text",placeholder:"Email"},domProps:{value:t.email},on:{blur:function(s){return e.saveEmail(t)},input:function(s){s.target.composing||e.$set(t,"email",s.target.value)}}}),e._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.type,expression:"user.type"}],attrs:{placeholder:"User Type"},on:{blur:function(s){return e.saveUserType(t)},change:function(s){var a=Array.prototype.filter.call(s.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(t,"type",s.target.multiple?a:a[0])}}},[s("option",{attrs:{value:"a"}},[e._v("Admin")]),e._v(" "),s("option",{attrs:{value:"m"}},[e._v("Moderator")]),e._v(" "),s("option",{attrs:{value:"g"}},[e._v("Guest")])]),e._v(" "),s("button",{staticClass:"delete-circle",on:{click:function(s){return s.preventDefault(),e.showModal(t,"delete")}}},[s("p",[e._v("X")])])])})),e._v(" "),"delete"==e.modal?s("modal",{on:{close:function(t){e.modal=null}}},[s("div",{attrs:{slot:"header"},slot:"header"},[s("div",{staticClass:"circle del"},[s("p",[e._v("X")])])]),e._v(" "),s("div",{attrs:{slot:"body"},slot:"body"},[s("h3",[e._v("Are you sure?")]),e._v(" "),s("p",[e._v("You are deleting the user "+e._s(e.selectedModal.name)+" user.")])]),e._v(" "),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("button",{staticClass:"btn del",on:{click:function(t){return t.preventDefault(),e.deleteUser(e.selectedModal)}}},[e._v("Delete")])])]):e._e()],2)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{},[t("div",{staticClass:"title"},[t("h1",[this._v("Users")])])])}],!1,null,null,null);t.default=i.exports}}]);