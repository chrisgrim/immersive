(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{294:function(e,t,i){"use strict";i.r(t);var a=i(81),n=i(77),s=i(87),o={mixins:[a.a],components:{CubeSpinner:s.a},props:["event"],computed:{hasImage:function(){return!(!this.image&&!this.imageFile.src)},displayImage:function(){return"backgroundImage: url('".concat(this.imageFile.src&&!this.$v.imageFile.$error?this.imageFile.src:this.image,"')")},endpoint:function(){return"/create-event/".concat(this.event.slug,"/images")}},data:function(){return{image:this.event.largeImagePath?"/storage/".concat(this.event.largeImagePath):"",loading:!1,disabled:!1,readyToSubmit:!1,imageFile:"",formData:new FormData,disableUntilUploaded:!this.event.largeImagePath}},methods:{onImageUpload:function(e){if(this.imageFile=e,this.$v.$touch(),this.$v.$invalid)return!1;this.onSubmit()},onSubmit:function(){var e=this;this.onToggle(),this.formData.append("image",this.imageFile.file),console.log(this.imageFile.file),axios.post(this.endpoint,this.formData).then((function(t){e.disableUntilUploaded=!1,e.onToggle()})).catch((function(t){e.onErrors(t)}))},onToggle:function(){this.loading=!this.loading,this.disabled=!this.disabled},checkSubmissionStatus:function(){"p"!==this.event.status&&"e"!==this.event.status&&this.event.organizer_id&&this.event.name&&(this.event.location_latlon||!this.event.hasLocation)&&this.event.category_id&&this.event.show_times&&this.event.description&&this.event.advisories_id&&(this.readyToSubmit=!0)}},created:function(){this.checkSubmissionStatus()},validations:{imageFile:{required:n.required,fileSize:function(){return!this.imageFile||this.imageFile.file.size<20971520},fileType:function(){return!this.imageFile||["image/jpeg","image/png","image/gif"].includes(this.imageFile.file.type)},imageRatio:function(){return!this.imageFile||this.imageFile.width>800&&this.imageFile.height>450}}}},r=i(80),l=Object(r.a)(o,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"event-create__image"},[i("section",{staticClass:"field"},[i("h2",{staticStyle:{"text-align":"center"}},[e._v("Upload Image")]),e._v(" "),i("div",{staticClass:"event-create-image"},[i("div",{staticClass:"image-loader"},[i("label",{staticClass:"image-loader__label",style:e.displayImage},[i("div",{staticClass:"image-loader__label-body",class:{over:e.hasImage,load:e.loading}},[i("div",{staticClass:"box"},[i("div",{staticClass:"in"},[e.loading?e._e():i("div",[i("svg",{staticClass:"b",attrs:{height:"32",width:"32",viewBox:"0 0 24 24","aria-label":"Add an image or video",role:"img"}},[i("path",{attrs:{d:"M24 12c0-6.627-5.372-12-12-12C5.373 0 0 5.373 0 12s5.373 12 12 12c6.628 0 12-5.373 12-12zm-10.767 3.75a1.25 1.25 0 0 1-2.5 0v-3.948l-1.031 1.031a1.25 1.25 0 0 1-1.768-1.768L12 7l4.066 4.065a1.25 1.25 0 0 1-1.768 1.768l-1.065-1.065v3.982z"}})])]),e._v(" "),i("div",[e.hasImage?e._e():i("p",[e._v("Click here to upload image"),i("br"),e._v("Must be at least 800 x 450 and under 20mb")]),e._v(" "),e.hasImage?i("p",[e._v("Change Image")]):e._e()])])]),e._v(" "),i("image-upload",{on:{loaded:e.onImageUpload}}),e._v(" "),i("CubeSpinner",{attrs:{loading:e.loading}})],1)]),e._v(" "),i("div",[e.$v.imageFile.$error?i("div",{staticClass:"validation-error"},[e.$v.imageFile.required?e._e():i("p",{staticClass:"error"},[e._v("The image is required")]),e._v(" "),e.$v.imageFile.fileSize?e._e():i("p",{staticClass:"error"},[e._v("The image file size is too large")]),e._v(" "),e.$v.imageFile.fileType?e._e():i("p",{staticClass:"error"},[e._v("The image needs to be a JPG, PNG or GIF")]),e._v(" "),e.$v.imageFile.imageRatio?e._e():i("p",{staticClass:"error"},[e._v("The image needs to be at least 800 x 450")])]):e._e()])])])]),e._v(" "),i("div",{staticClass:"event-create__submit-button"},[i("button",{staticClass:"nav-back-button",attrs:{disabled:e.disabled},on:{click:function(t){return t.preventDefault(),e.onBackInitial()}}},[e._v(" Save and Exit ")])]),e._v(" "),i("div",{staticClass:"create-button__back"},[i("button",{staticClass:"create",attrs:{disabled:e.disabled},on:{click:function(t){return t.preventDefault(),e.onBack("advisories")}}},[e._v(" Back ")])]),e._v(" "),i("div",{staticClass:"create-button__forward"},[e.readyToSubmit?i("button",{staticClass:"create",attrs:{disabled:e.disableUntilUploaded},on:{click:function(t){return t.preventDefault(),e.onForward("review")}}},[e._v(" Final Review ")]):e._e()])])}),[],!1,null,null,null);t.default=l.exports},80:function(e,t,i){"use strict";function a(e,t,i,a,n,s,o,r){var l,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=i,c._compiled=!0),a&&(c.functional=!0),s&&(c._scopeId="data-v-"+s),o?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),n&&n.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(o)},c._ssrRegister=l):n&&(l=r?function(){n.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:n),l)if(c.functional){c._injectStyles=l;var d=c.render;c.render=function(e,t){return l.call(t),d(e,t)}}else{var u=c.beforeCreate;c.beforeCreate=u?[].concat(u,l):[l]}return{exports:e,options:c}}i.d(t,"a",(function(){return a}))},81:function(e,t,i){"use strict";t.a={methods:{checkVuelidate:function(){return this.$v.$touch(),!this.$v.$invalid&&(this.disabled=!0),this.$v.$invalid},onErrors:function(e){e&&(this.serverErrors=e.response.data.errors),this.disabled=!1},onBackInitial:function(){return window.location.href="/create-event/edit/"},onBack:function(e){return window.location.href="/create-event/".concat(this.event.slug,"/").concat(e)},onFetch:function(e){return"/create-event/".concat(this.event.slug,"/").concat(e,"/fetch?timestamp=").concat((new Date).getTime())},onForward:function(e){return window.location.href="/create-event/".concat(this.event.slug,"/").concat(e)},onRegistered:function(){return window.location.href="/email/verify"},onFinishOrganizer:function(e){return window.location.href=e}}}},87:function(e,t,i){"use strict";var a={props:{loading:{type:Boolean,default:!0}},data:function(){return{styles:{width:this.width+"px",height:this.height+"px"}}},name:"CubeSpinner"},n=i(80),s=Object(n.a)(a,(function(){var e=this.$createElement,t=this._self._c||e;return this.loading?t("div",{staticClass:"spinner"},[this._m(0),this._v(" "),t("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",version:"1.1"}},[t("defs",[t("filter",{attrs:{id:"goo"}},[t("feGaussianBlur",{attrs:{in:"SourceGraphic",stdDeviation:"10",result:"blur"}}),this._v(" "),t("feColorMatrix",{attrs:{in:"blur",mode:"matrix",values:"1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 21 -7"}})],1)])])]):this._e()}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"area"},[t("div",{staticClass:"dot dot-1"}),this._v(" "),t("div",{staticClass:"dot dot-2"}),this._v(" "),t("div",{staticClass:"dot dot-3"})])}],!1,null,null,null);t.a=s.exports}}]);