(window.webpackJsonp=window.webpackJsonp||[]).push([[14,59],{GbXj:function(e,t,a){"use strict";var i={props:{loading:{type:Boolean,default:!0}},data:function(){return{styles:{width:this.width+"px",height:this.height+"px"}}},name:"CubeSpinner"},s=a("KHd+"),o=Object(s.a)(i,(function(){var e=this.$createElement,t=this._self._c||e;return this.loading?t("div",{staticClass:"spinner"},[this._m(0),this._v(" "),t("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",version:"1.1"}},[t("defs",[t("filter",{attrs:{id:"goo"}},[t("feGaussianBlur",{attrs:{in:"SourceGraphic",stdDeviation:"10",result:"blur"}}),this._v(" "),t("feColorMatrix",{attrs:{in:"blur",mode:"matrix",values:"1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 21 -7"}})],1)])])]):this._e()}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"area"},[t("div",{staticClass:"dot dot-1"}),this._v(" "),t("div",{staticClass:"dot dot-2"}),this._v(" "),t("div",{staticClass:"dot dot-3"})])}],!1,null,null,null);t.a=o.exports},"KHd+":function(e,t,a){"use strict";function i(e,t,a,i,s,o,n,r){var l,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=a,c._compiled=!0),i&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),n?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),s&&s.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(n)},c._ssrRegister=l):s&&(l=r?function(){s.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:s),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(e,t){return l.call(t),u(e,t)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,l):[l]}return{exports:e,options:c}}a.d(t,"a",(function(){return i}))},ciAJ:function(e,t,a){"use strict";t.a={methods:{checkVuelidate:function(){return this.$v.$touch(),!this.$v.$invalid&&(this.disabled=!0),this.$v.$invalid},onErrors:function(e){e&&(this.serverErrors=e.response.data.errors),this.disabled=!1},onBackInitial:function(){return window.location.href="/create-event/edit/"},onBack:function(e){return window.location.href="/create-event/".concat(this.event.slug,"/").concat(e)},onFetch:function(e){return"/create-event/".concat(this.event.slug,"/").concat(e,"/fetch?timestamp=").concat((new Date).getTime())},onForward:function(e){return window.location.href="/create-event/".concat(this.event.slug,"/").concat(e)},onRegistered:function(){return window.location.href="/email/verify"},onFinishOrganizer:function(e){return window.location.href=e}}}},kwsG:function(e,t,a){"use strict";a.r(t);a("LvDl");var i=a("uh4u"),s=a("ta7f"),o=a("GbXj");function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r={props:["loaduser","events","auth"],mixins:[{methods:{setPlace:function(){var e=this.autocomplete.getPlace();this.updateLats(e),this.getAddressObject(e.address_components)},updateLats:function(e){this.location.latitude=e.geometry.location.lat(),this.location.longitude=e.geometry.location.lng()},getAddressObject:function(e){var t={postal_code:["postal_code"],region:["administrative_area_level_1","administrative_area_level_2","administrative_area_level_3","administrative_area_level_4","administrative_area_level_5"],city:["locality","sublocality","sublocality_level_1","sublocality_level_2","sublocality_level_3","sublocality_level_4"],country:["country"]},a={postal_code:"",region:"",city:"",country:""};e.forEach((function(e){for(var i in t)-1!==t[i].indexOf(e.types[0])&&(a[i]="country"===i?e.short_name:e.long_name)})),this.updateLocationFields(a)},updateLocationFields:function(e){null!==e&&"object"===n(e)&&null!==e.id&&(this.location=_.extend(this.location,e))}}},a("ciAJ").a],components:{ImageUpload:i.default,CubeSpinner:o.a},computed:{locationPlaceholder:function(){return this.location.city?this.location.city+", "+this.location.country:this.location.region?this.location.region:this.location.country?" the "+this.location.country:void 0},userOwnsPage:function(){return parseFloat(this.auth)==this.loaduser.id},canEditPage:function(){return this.userOwnsPage&&this.user.email_verified_at},submitObject:function(){return{name:this.user.name,location:this.location,email:this.user.email}},endPoint:function(){return"/users/".concat(this.user.id)}},data:function(){return{user:this.loaduser,avatar:this.loaduser.thumbImagePath?this.loaduser.thumbImagePath:"",location:this.loaduser.location?this.loaduser.location:this.initializeLocationObject(),imageFile:"",active:null,loading:!1,serverErrors:[],onEditUser:!1,uploading:!1,onSent:!1,disabled:!1,webp:"",formData:new FormData}},methods:{initializeLocationObject:function(){return{street:"",city:"",region:"",country:"",postal_code:"",hiddenLocation:"",hiddenLocationToggle:0,latitude:"",longitude:"",home:""}},logout:function(){axios.post("/logout").then((function(e){e.status,window.location.href="/"})).catch((function(e){}))},resend:function(){var e=this;this.disabled=!0,axios.post("/email/resend").then((function(t){e.onSent=!0,e.disabled=!1,console.log(t.data)})).catch((function(e){console.log(e.data)}))},onImageUpload:function(e){if(this.imageFile=e,this.$v.$touch(),this.$v.$invalid)return!1;this.onAddImage()},onAddImage:function(){this.onToggle(),this.formData.append("image",this.imageFile.file),this.formData.append("_method","PATCH"),axios.post(this.endPoint,this.formData).then((function(e){location.reload()})).catch((function(e){console.log(e)}))},onSubmit:function(){var e=this;if(this.checkVuelidate())return!1;axios.patch(this.endPoint,this.submitObject).then((function(t){e.onEditUser=!1,e.disabled=!1})).catch((function(t){e.onErrors(t)}))},onToggle:function(){this.uploading=!0,this.loading=!0,this.disabled=!0},canUseWebP:function(){var e=0==document.createElement("canvas").toDataURL("image/webp").indexOf("data:image/webp");return this.loaduser.thumbImagePath&&e?this.avatar=this.loaduser.thumbImagePath:this.loaduser.thumbImagePath?this.avatar="".concat(this.loaduser.thumbImagePath.slice(0,-4),"jpg"):void 0}},mounted:function(){this.autocomplete=new google.maps.places.Autocomplete(this.$refs.autocomplete,{types:["geocode"]}),this.autocomplete.addListener("place_changed",this.setPlace),this.canUseWebP()},validations:{imageFile:{fileSize:function(){return!this.imageFile||this.imageFile.file.size<20971520},fileType:function(){return!this.imageFile||["image/jpeg","image/png","image/gif"].includes(this.imageFile.file.type)},imageRatio:function(){return!this.imageFile||this.imageFile.width>500&&this.imageFile.height>500},auth:function(){return!this.auth||this.auth!==this.user.id}},user:{name:{required:s.required,maxLength:Object(s.maxLength)(50),auth:function(){return!this.auth||this.auth!==this.user.id}},email:{required:s.required,email:s.email,auth:function(){return!this.auth||this.auth!==this.user.id}}}}},l=a("KHd+"),c=Object(l.a)(r,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user-profile grid"},[a("section",{staticClass:"user-profile-image"},[e.canEditPage?a("div",{staticClass:"user-profile-image"},[e.avatar?a("label",{staticClass:"user-profile-image__wrapper",class:{imageloaded:e.avatar,imageloading:e.uploading},style:"background:url('/storage/"+e.avatar+"')"},[a("image-upload",{on:{loaded:e.onImageUpload}}),e._v(" "),a("CubeSpinner",{attrs:{loading:e.loading}}),e._v(" "),a("span",{staticClass:"user-profile-image__update-text"},[e.uploading?a("p",[e._v("Loading")]):a("p",[e._v("Update")])])],1):e.user.gravatar?a("label",{staticClass:"user-profile-image__wrapper",class:{imageloaded:e.avatar,imageloading:e.uploading},style:"background:url('"+e.user.gravatar+"')center no-repeat;background-size: cover;"},[a("image-upload",{on:{loaded:e.onImageUpload}}),e._v(" "),a("CubeSpinner",{attrs:{loading:e.loading}}),e._v(" "),a("span",{staticClass:"user-profile-image__update-text"},[e.uploading?a("p",[e._v("Loading")]):a("p",[e._v("Update")])])],1):a("div",{staticClass:"user-profile-image"},[a("div",{staticClass:"user-profile-noimage__text",style:"background:"+e.user.hexColor},[a("h2",[e._v(e._s(e.loaduser.name.charAt(0)))])]),e._v(" "),a("label",{staticClass:"profile-wrapper",class:{imageloaded:e.avatar,imageloading:e.uploading}},[a("image-upload",{on:{loaded:e.onImageUpload}}),e._v(" "),a("CubeSpinner",{attrs:{loading:e.loading}}),e._v(" "),a("span",{staticClass:"user-profile-image__update-text"},[e.uploading?a("p",[e._v("Loading")]):a("p",[e._v("Update")])])],1)]),e._v(" "),e.$v.imageFile.$error?a("div",{staticClass:"validation-error"},[e.$v.imageFile.fileSize?e._e():a("p",{staticClass:"error"},[e._v("Image size is over 20MB")]),e._v(" "),e.$v.imageFile.fileType?e._e():a("p",{staticClass:"error"},[e._v("Needs to be a Jpg, Png or Gif")]),e._v(" "),e.$v.imageFile.imageRatio?e._e():a("p",{staticClass:"error"},[e._v("Needs to be at least 400 x 400")]),e._v(" "),e.$v.imageFile.auth?e._e():a("p",{staticClass:"error"},[e._v("you don't have permission to edit")])]):e._e()]):a("div",[e.avatar?a("div",[a("picture",[a("source",{attrs:{type:"image/webp",srcset:"/storage/"+e.avatar}}),e._v(" "),a("img",{staticClass:"user-profile-image",attrs:{src:"/storage/"+e.avatar.slice(0,-4)+"jpg",alt:""+e.loaduser.name}})])]):e.user.gravatar?a("div",[a("picture",[a("img",{staticClass:"user-profile-image",attrs:{src:e.user.gravatar,alt:""+e.loaduser.name}})])]):a("div",{staticClass:"user-profile-noimage__text",style:"background:"+e.user.hexColor},[a("h2",[e._v(e._s(e.loaduser.name.charAt(0)))])])])]),e._v(" "),a("section",{staticClass:"user-enter-profile"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.onEditUser,expression:"onEditUser"}]},[a("div",{staticClass:"field"},[a("div",{staticClass:"text"},[a("div",{staticClass:"field"},[a("label",[e._v("User Name")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.user.name,expression:"user.name"}],class:{active:"user"==e.active,error:e.$v.user.name.$error},attrs:{type:"text"},domProps:{value:e.user.name},on:{click:function(t){e.active="website"},blur:function(t){e.active=null},input:[function(t){t.target.composing||e.$set(e.user,"name",t.target.value)},e.$v.user.name.$touch]}}),e._v(" "),e.$v.user.name.$error?a("div",{staticClass:"validation-error"},[e.$v.user.name.required?e._e():a("p",{staticClass:"error"},[e._v("Must have a name")]),e._v(" "),e.$v.user.name.maxLength?e._e():a("p",{staticClass:"error"},[e._v("Can't be more than 50 characters")]),e._v(" "),e.$v.user.name.auth?e._e():a("p",{staticClass:"error"},[e._v("You don't have permission to edit")])]):e._e()]),e._v(" "),a("div",{staticClass:"field"},[a("label",[e._v(" Location ")]),e._v(" "),a("input",{ref:"autocomplete",class:{active:"location"==e.active},attrs:{placeholder:e.locationPlaceholder?e.locationPlaceholder:"Choose your location",autocomplete:"false",onfocus:"value = ''",type:"text"},on:{click:function(t){e.active="location"},blur:function(t){e.active=null}}})]),e._v(" "),a("div",{staticClass:"field"},[a("label",[e._v(" Email ")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.user.email,expression:"user.email"}],class:{active:"email"==e.active,error:e.$v.user.email.$error},attrs:{type:"email"},domProps:{value:e.user.email},on:{click:function(t){e.active="email"},blur:function(t){e.active=null},input:[function(t){t.target.composing||e.$set(e.user,"email",t.target.value)},e.$v.user.email.$touch]}}),e._v(" "),e.$v.user.email.$error?a("div",{staticClass:"validation-error"},[e.$v.user.email.required?e._e():a("p",{staticClass:"error"},[e._v("Must have an email")]),e._v(" "),e.$v.user.email.email?e._e():a("p",{staticClass:"error"},[e._v("Must be a valid email")]),e._v(" "),e.$v.user.email.auth?e._e():a("p",{staticClass:"error"},[e._v("You don't have permission to edit")])]):e._e()]),e._v(" "),a("div",{},[a("button",{staticClass:"save",attrs:{disabled:e.disabled},on:{click:function(t){return t.preventDefault(),e.onSubmit()}}},[e._v(" Save ")]),e._v(" "),a("button",{staticClass:"cancel",on:{click:function(t){t.preventDefault(),e.onEditUser=!1}}},[e._v(" Cancel ")])])])])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.onEditUser,expression:"!onEditUser"}]},[a("div",{staticClass:"profile-user-name"},[a("h1",[e._v(e._s(e.user.name))])]),e._v(" "),a("div",{staticClass:"info"},[a("div",{staticClass:"profile-user-info"},[e._v("\n                    Member since "+e._s(e._f("dateFormat")(new Date(e.user.created_at),"YYYY"))+"\n                ")]),e._v(" "),e.canEditPage?a("div",{staticClass:"profile-user-edit",on:{click:function(t){e.onEditUser=!0}}},[e._v("\n                    Edit profile\n                ")]):e._e(),e._v(" "),!e.userOwnsPage||e.user.email_verified_at||e.onSent?e._e():a("button",{staticClass:"verify-email",attrs:{disabled:e.disabled},on:{click:function(t){return t.preventDefault(),e.resend(t)}}},[e._v("\n                    Please verify your account.\n                ")]),e._v(" "),e.userOwnsPage&&!e.user.email_verified_at&&e.onSent?a("div",{staticClass:"ver a"},[e._v("\n                    Please check your email.\n                ")]):e._e()]),e._v(" "),e.location.latitude?a("div",{staticClass:"profile-user-info"},[a("div",[e._v("\n                    Lives near "),a("span",{staticStyle:{"font-weight":"600",color:"#616161"}},[e._v(e._s(e.locationPlaceholder))])])]):e._e()]),e._v(" "),a("div",{staticClass:"logout mobile"},[a("button",{on:{click:function(t){return t.preventDefault(),e.logout()}}},[e._v("Log out")])])])])}),[],!1,null,null,null);t.default=c.exports},uh4u:function(e,t,a){"use strict";a.r(t);var i={methods:{onChange:function(e){var t=this;if(e.target.files.length){var a=e.target.files[0],i=new FileReader;i.readAsDataURL(a),i.onload=function(e){var i=e.target.result,s=new Image;s.onload=function(){t.$emit("loaded",{src:i,file:a,width:s.width,height:s.height})},s.onerror=function(){t.$emit("error")},s.src=i}}}}},s=a("KHd+"),o=Object(s.a)(i,(function(){var e=this.$createElement;return(this._self._c||e)("input",{staticClass:"fileinput",attrs:{type:"file",accept:"image/*"},on:{change:this.onChange}})}),[],!1,null,null,null);t.default=o.exports}}]);