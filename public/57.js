(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{282:function(e,t,i){"use strict";i.r(t);var a=i(82),s=i.n(a),c=(i(91),i(78)),r=i(92),n=i.n(r),o=(i(89),i(247)),l={props:{event:{type:Object}},components:{flatPickr:n.a,Money:o.Money},computed:{dateArray:function(){return!Array.isArray(this.dates)&&this.dates.includes(",")?this.dates.split(","):Array.isArray(this.dates)?void 0:[this.dates]}},data:function(){return{eventUrl:"/create-event/".concat(this.event.slug),dates:"",config:{minDate:"today",maxDate:(new Date).fp_incr(180),mode:"multiple",inline:!0,showMonths:2,dateFormat:"Y-m-d H:i:s"},tickets:[this.initializeTicketObject()],showTimes:"",money:{decimal:".",thousands:"",prefix:"",suffix:"",precision:2,masked:!1},dis:!1,num:!1,activeItem:null}},methods:{deleteRow:function(e){this.$delete(this.tickets,e)},initializeShowtimeObject:function(){return{hh:"00",mm:"00",A:"PM"}},addTickets:function(){this.tickets.push(this.initializeTicketObject())},initializeTicketObject:function(){return{id:"",name:"",show_id:"",ticket_amount:"",ticket_price:""}},load:function(){var e=this;axios.get("".concat(this.eventUrl,"/shows/fetch?timestamp=").concat((new Date).getTime())).then((function(t){console.log(t.data),t.data.dates.length&&(e.dates=t.data.dates),t.data.tickets.length&&(e.tickets=t.data.tickets[0].tickets),t.data.showTimes&&(e.showTimes=t.data.showTimes)}))},goBack:function(){window.location.href="".concat(this.eventUrl,"/category")},submitDates:function(){var e,t=this;return s.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:if(this.num=!0,this.$v.$touch(),!this.$v.$invalid){i.next=4;break}return i.abrupt("return",!1);case 4:this.dis=!0,e={dates:this.dateArray,showtimes:this.showTimes,tickets:this.tickets},axios.post("".concat(this.eventUrl,"/shows"),e).then((function(e){window.location.href="".concat(t.eventUrl,"/description")}));case 7:case"end":return i.stop()}}),null,this)}},mounted:function(){this.load()},validations:{tickets:{required:c.required,$each:{name:{required:c.required,maxLength:Object(c.maxLength)(80)},ticket_price:{required:c.required,minValue:Object(c.minValue)(.01),maxLength:Object(c.maxLength)(7)}}},showTimes:{required:c.required,maxLength:Object(c.maxLength)(400)},dates:{required:c.required}}},d=i(81),m=Object(d.a)(l,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"shows"},[e._m(0),e._v(" "),i("div",{staticClass:"section"},[i("div",{staticClass:"pricing"},[i("div",{staticClass:"field"},[i("label",{staticClass:"area"},[e._v(" Show times")]),e._v(" "),i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.showTimes,expression:"showTimes"}],staticClass:"create-input area",class:{active:"times"==e.activeItem,error:e.$v.showTimes.$error},attrs:{rows:"8",placeholder:"Please provide a brief description of daily show times...8:00PM and 10:00PM shows or 10:00PM shows during the week and 12:00PM during the weekend.",required:"",autofocus:""},domProps:{value:e.showTimes},on:{click:function(t){e.activeItem="times"},blur:function(t){e.activeItem=null},input:[function(t){t.target.composing||(e.showTimes=t.target.value)},e.$v.showTimes.$touch]}}),e._v(" "),e.$v.showTimes.$error?i("div",{staticClass:"validation-error"},[e.$v.showTimes.required?e._e():i("p",{staticClass:"error"},[e._v("Please give a brief description of show times")])]):e._e()]),e._v(" "),i("div",{staticClass:"field cost"},[i("label",{staticClass:"area"},[e._v(" Ticket types and prices ")]),e._v(" "),i("div",{staticClass:"ticket-box"},e._l(e.$v.tickets.$each.$iter,(function(t,a){return i("div",{staticClass:"ticket-box-grid"},[i("div",{staticClass:"field"},[i("label",[e._v("Ticket Type")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.name.$model,expression:"v.name.$model"}],staticClass:"create-input",class:{active:"ticket"==e.activeItem,error:t.name.$error},attrs:{name:"name",placeholder:"ex: General, VIP, Student"},domProps:{value:t.name.$model},on:{click:function(t){e.activeItem="ticket"},blur:function(t){e.activeItem=null},input:function(i){i.target.composing||e.$set(t.name,"$model",i.target.value)}}}),e._v(" "),t.name.$error?i("div",{staticClass:"validation-error"},[t.name.required?e._e():i("p",{staticClass:"error"},[e._v("Must enter a ticket name")]),e._v(" "),t.name.maxLength?e._e():i("p",{staticClass:"error"},[e._v("Name is too Long")])]):e._e()]),e._v(" "),i("div",{staticClass:"field"},[i("label",[e._v("Ticket Price")]),e._v(" "),"checkbox"===e.money.type?i("input",e._b({directives:[{name:"model",rawName:"v-model",value:t.ticket_price.$model,expression:"v.ticket_price.$model"},{name:"money",rawName:"v-money",value:e.money,expression:"money"}],class:{active:"price"==e.activeItem,error:t.ticket_price.$error&&e.num},staticStyle:{"text-align":"right"},attrs:{placeholder:"$0.00",type:"checkbox"},domProps:{checked:Array.isArray(t.ticket_price.$model)?e._i(t.ticket_price.$model,null)>-1:t.ticket_price.$model},on:{click:function(t){e.activeItem="price"},blur:function(t){e.activeItem=null},keydown:function(e){"-"===e.key&&e.preventDefault()},change:function(i){var a=t.ticket_price.$model,s=i.target,c=!!s.checked;if(Array.isArray(a)){var r=e._i(a,null);s.checked?r<0&&e.$set(t.ticket_price,"$model",a.concat([null])):r>-1&&e.$set(t.ticket_price,"$model",a.slice(0,r).concat(a.slice(r+1)))}else e.$set(t.ticket_price,"$model",c)}}},"input",e.money,!1)):"radio"===e.money.type?i("input",e._b({directives:[{name:"model",rawName:"v-model",value:t.ticket_price.$model,expression:"v.ticket_price.$model"},{name:"money",rawName:"v-money",value:e.money,expression:"money"}],class:{active:"price"==e.activeItem,error:t.ticket_price.$error&&e.num},staticStyle:{"text-align":"right"},attrs:{placeholder:"$0.00",type:"radio"},domProps:{checked:e._q(t.ticket_price.$model,null)},on:{click:function(t){e.activeItem="price"},blur:function(t){e.activeItem=null},keydown:function(e){"-"===e.key&&e.preventDefault()},change:function(i){return e.$set(t.ticket_price,"$model",null)}}},"input",e.money,!1)):i("input",e._b({directives:[{name:"model",rawName:"v-model",value:t.ticket_price.$model,expression:"v.ticket_price.$model"},{name:"money",rawName:"v-money",value:e.money,expression:"money"}],class:{active:"price"==e.activeItem,error:t.ticket_price.$error&&e.num},staticStyle:{"text-align":"right"},attrs:{placeholder:"$0.00",type:e.money.type},domProps:{value:t.ticket_price.$model},on:{click:function(t){e.activeItem="price"},blur:function(t){e.activeItem=null},keydown:function(e){"-"===e.key&&e.preventDefault()},input:function(i){i.target.composing||e.$set(t.ticket_price,"$model",i.target.value)}}},"input",e.money,!1)),e._v(" "),t.ticket_price.$error?i("div",{staticClass:"validation-error"},[t.ticket_price.minValue?e._e():i("p",{directives:[{name:"show",rawName:"v-show",value:e.num,expression:"num"}],staticClass:"error"},[e._v("Please enter an amount")]),e._v(" "),t.ticket_price.maxLength?e._e():i("p",{staticClass:"error"},[e._v("Please enter an amount under $10,000")]),e._v(" "),t.ticket_price.required?e._e():i("p",{staticClass:"error"},[e._v("Please enter a price")])]):e._e(),e._v(" "),e.tickets.length>1?i("button",{staticClass:"delete-circle",on:{click:function(t){return t.preventDefault(),e.deleteRow(a)}}},[e._v("X")]):e._e()])])})),0),e._v(" "),i("div",{staticClass:"add-button",on:{click:function(t){return t.preventDefault(),e.addTickets(t)}}},[i("button",{staticClass:"add-button"},[e._v("+ Ticket Types")])])])]),e._v(" "),i("div",{staticClass:"calendar"},[i("div",{staticClass:"field"},[i("label",[e._v(" Select all show dates")]),e._v(" "),i("flat-pickr",{staticClass:"form-control",attrs:{config:e.config,placeholder:"Select date",name:"dates"},model:{value:e.dates,callback:function(t){e.dates=t},expression:"dates"}}),e._v(" "),e.$v.dates.$error?i("div",{staticClass:"validation-error"},[e.$v.dates.required?e._e():i("p",{staticClass:"error"},[e._v("Please add at least 1 show date")])]):e._e()],1),e._v(" "),i("button",{staticClass:"create",attrs:{disabled:e.dis},on:{click:function(t){return t.preventDefault(),e.submitDates()}}},[e._v(" Next ")])])]),e._v(" "),i("div",{staticClass:"inNav"},[i("button",{staticClass:"create",attrs:{disabled:e.dis},on:{click:function(t){return t.preventDefault(),e.goBack()}}},[e._v(" Back ")]),e._v(" "),i("button",{staticClass:"create",attrs:{disabled:e.dis},on:{click:function(t){return t.preventDefault(),e.submitDates()}}},[e._v(" Next ")])])])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"ctitle"},[t("h2",[this._v("Shows")])])}],!1,null,null,null);t.default=m.exports}}]);