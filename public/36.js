(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{FLCs:function(t,e,r){"use strict";r.r(e);var i=r("ciAJ"),n=r("jl8+"),a=r.n(n),o=r("ta7f"),s=(r("LvDl"),{components:{Multiselect:a.a},mixins:[i.a],props:["event","loadtags"],computed:{endpoint:function(){return"/create-event/".concat(this.event.slug,"/description")}},data:function(){return{group:this.initializeSubmitObject(),tagName:this.event.genres?this.event.genres:"",tagOptions:this.loadtags,disabled:!1,serverErrors:[],active:null}},methods:{initializeSubmitObject:function(){return{description:this.event.description?this.event.description:"",websiteUrl:this.event.websiteUrl?this.event.websiteUrl:"",ticketUrl:this.event.ticketUrl?this.event.ticketUrl:"",genre:this.event.genres?this.event.genres.map((function(t){return t.name})):""}},onSubmit:function(t){var e=this;if(this.checkVuelidate())return!1;axios.patch(this.endpoint,this.group).then((function(r){"exit"==t?e.onBackInitial():e.onForward("advisories")})).catch((function(t){e.onErrors(t)}))},onToggle:function(t){this.active=t,this.serverErrors=[]},addTag:function(t){var e={name:t,id:t.substring(0,0)+Math.floor(1e7*Math.random())};this.tagOptions.push(e),this.tagName.push(e)},onLoad:function(){var t=this;axios.get(this.onFetch("description")).then((function(e){e.data.event&&(t.group.description=e.data.event.description),e.data.event&&(t.group.websiteUrl=e.data.event.websiteUrl),e.data.event&&(t.group.ticketUrl=e.data.event.ticketUrl),e.data.genres&&(t.group.genre=e.data.genres.map((function(t){return t.name})))}))}},created:function(){this.onLoad()},watch:{tagName:function(){return this.group.genre=this.tagName.map((function(t){return t.name}))}},validations:{tagName:{required:o.required},group:{description:{required:o.required},websiteUrl:{url:o.url,webNotWorking:function(){return!this.websiteUrl||!this.hasServerError("broken")}},ticketUrl:{url:o.url,ticketNotWorking:function(){return!this.ticketUrl||!this.hasServerError("broken")}}}}}),c=r("KHd+"),l=Object(c.a)(s,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"event-create__description grid"},[r("section",{staticClass:"event-create"},[t._m(0),t._v(" "),r("div",{staticClass:"field"},[r("label",{staticClass:"area"},[t._v(" Describe your event to our readers ")]),t._v(" "),r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.group.description,expression:"group.description"}],class:{active:"description"==t.active,error:t.$v.group.description.$error},attrs:{type:"text",name:"description",placeholder:"eg. Our super scary event will bring your fears to the surface...",rows:"14"},domProps:{value:t.group.description},on:{input:[function(e){e.target.composing||t.$set(t.group,"description",e.target.value)},t.$v.group.description.$touch],click:function(e){t.active="description"},blur:function(e){t.active=null}}}),t._v(" "),t.$v.group.description.$error?r("div",{staticClass:"validation-error"},[t.$v.group.description.required?t._e():r("p",{staticClass:"error"},[t._v("Must provide a description")])]):t._e()]),t._v(" "),r("div",{staticClass:"field"},[r("label",[t._v("Event website (optional)")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.group.websiteUrl,expression:"group.websiteUrl"}],class:{active:"website"==t.active,error:t.$v.group.websiteUrl.$error},attrs:{type:"text",placeholder:"Leave blank if using organizer website url"},domProps:{value:t.group.websiteUrl},on:{click:function(e){return t.onToggle("website")},blur:function(e){t.active=null},input:[function(e){e.target.composing||t.$set(t.group,"websiteUrl",e.target.value)},t.$v.group.websiteUrl.$touch]}}),t._v(" "),t.$v.group.websiteUrl.$error?r("div",{staticClass:"validation-error"},[t.$v.group.websiteUrl.url?t._e():r("p",{staticClass:"error"},[t._v("Must be a url (https://...)")]),t._v(" "),t.$v.group.websiteUrl.webNotWorking?t._e():r("p",{staticClass:"error"},[t._v("One of your urls isn't working")])]):t._e()]),t._v(" "),r("div",{staticClass:"field"},[r("label",[t._v("Ticket website (optional)")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.group.ticketUrl,expression:"group.ticketUrl"}],class:{active:"ticket"==t.active,error:t.$v.group.ticketUrl.$error},attrs:{type:"text",placeholder:"Leave blank if using organizer website url"},domProps:{value:t.group.ticketUrl},on:{click:function(e){return t.onToggle("ticket")},blur:function(e){t.active=null},input:[function(e){e.target.composing||t.$set(t.group,"ticketUrl",e.target.value)},t.$v.group.ticketUrl.$touch]}}),t._v(" "),t.$v.group.ticketUrl.$error?r("div",{staticClass:"validation-error"},[t.$v.group.ticketUrl.url?t._e():r("p",{staticClass:"error"},[t._v(" Must be a url (https://...)")]),t._v(" "),t.$v.group.ticketUrl.ticketNotWorking?t._e():r("p",{staticClass:"error"},[t._v("One of your urls isn't working")])]):t._e()])]),t._v(" "),r("section",[t._m(1),t._v(" "),r("div",{staticClass:"field"},[r("label",[t._v("Type in or select all show tags. We use these to help people find your event!")]),t._v(" "),r("multiselect",{class:{active:"genre"==t.active,error:t.$v.tagName.$error},attrs:{"tag-placeholder":"Add this as new tag",placeholder:"Type here to create your own",label:"name","close-on-select":!0,"track-by":"id",options:t.tagOptions,multiple:!0,taggable:!0,"tag-position":"bottom"},on:{tag:t.addTag,input:t.$v.tagName.$touch,click:function(e){t.active="genre"},blur:function(e){t.active=null}},model:{value:t.tagName,callback:function(e){t.tagName=e},expression:"tagName"}}),t._v(" "),t.$v.tagName.$error?r("div",{staticClass:"validation-error"},[t.$v.tagName.required?t._e():r("p",{staticClass:"error"},[t._v("Must select at least one Tag")])]):t._e()],1)]),t._v(" "),r("div",{staticClass:"event-create__submit-button"},[r("button",{staticClass:"nav-back-button",attrs:{disabled:t.disabled},on:{click:function(e){return e.preventDefault(),t.onSubmit("exit")}}},[t._v(" Save and Exit ")])]),t._v(" "),r("div",{staticClass:"create-button__back"},[r("button",{staticClass:"create",attrs:{disabled:t.disabled},on:{click:function(e){return e.preventDefault(),t.onBack("shows")}}},[t._v(" Back ")])]),t._v(" "),r("div",{staticClass:"create-button__forward"},[r("button",{staticClass:"create",attrs:{disabled:t.disabled},on:{click:function(e){return e.preventDefault(),t.onSubmit()}}},[t._v(" Save and continue ")])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("h2",[this._v("Description")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tag-title"},[e("h3",[this._v("Event Tags")])])}],!1,null,null,null);e.default=l.exports},ciAJ:function(t,e,r){"use strict";e.a={methods:{checkVuelidate:function(){return this.$v.$touch(),!this.$v.$invalid&&(this.disabled=!0),this.$v.$invalid},onErrors:function(t){t&&(this.serverErrors=t.response.data.errors),this.disabled=!1},onBackInitial:function(){return window.location.href="/create-event/edit/"},onBack:function(t){return window.location.href="/create-event/".concat(this.event.slug,"/").concat(t)},onFetch:function(t){return"/create-event/".concat(this.event.slug,"/").concat(t,"/fetch?timestamp=").concat((new Date).getTime())},onForward:function(t){return window.location.href="/create-event/".concat(this.event.slug,"/").concat(t)},onRegistered:function(){return window.location.href="/email/verify"},onFinishOrganizer:function(t){return window.location.href=t}}}}}]);